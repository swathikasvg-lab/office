<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>SNMP Interface Recovery</title>
<style>
body{font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:#f7f9fb;color:#111;margin:0;padding:20px}
.card{background:#fff;border-radius:8px;box-shadow:0 2px 8px rgba(15,23,42,0.06);max-width:680px;margin:0 auto;padding:20px}
h1{font-size:18px;margin:0 0 8px}
p.lead{margin:0 0 16px;color:#334155}
table{width:100%;border-collapse:collapse;margin-top:8px}
th,td{padding:8px 10px;text-align:left;border-bottom:1px solid #eef2f7}
th{background:#fbfdff;font-weight:600;color:#0f172a}
.status{display:inline-block;padding:6px 10px;border-radius:999px;font-weight:600}
.down{background:#fee2e2;color:#991b1b}
.up{background:#ecfdf5;color:#065f46}
.footer{font-size:13px;color:#64748b;margin-top:18px}
</style>
</head>
<body>
<div class="card">
<h1>âœ… Interface Recovered: {{ hostname }} / {{ interface }}</h1>
<p class="lead">The interface <strong>{{ interface }}</strong> on <strong>{{ hostname }}</strong> has recovered (ifOperStatus = {{ metric_value }}). The configured rule <strong>{{ rule.name }}</strong> no longer detects the down condition.</p>


<table>
<tr><th>Rule</th><td>{{ rule.name }} (ID: {{ rule.id }})</td></tr>
<tr><th>Host</th><td>{{ hostname }}</td></tr>
<tr><th>Interface</th><td>{{ interface }}</td></tr>
<tr><th>Metric</th><td>{{ metric_name }}</td></tr>
<tr><th>Value</th><td><span class="status up">UP ({{ metric_value }})</span></td></tr>
<tr><th>Recovered at (IST)</th><td>{{ alert_time_ist }}</td></tr>
<tr><th>Downtime</th><td>{{ downtime_human }} ({{ downtime_seconds }}s)</td></tr>
</table>


<div class="footer">
<p>Notes:</p>
<ul>
<li>Downtime is computed from the last_triggered timestamp to the recovery time.</li>
<li>If downtime is missing, it may indicate older alerts without timestamp data.</li>
</ul>
<p>For post-mortem, review device logs and interface counters around the incident time.</p>
</div>
</div>
</body>
</html>
